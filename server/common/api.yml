swagger: "2.0"
info:
  version: 1.0.0
  title: wayfarer
  description: WayFarer is a public bus transportation booking service.(Project submitted for Andela Developer Challenge)
basePath: /api/v1
tags:
  - name: Examples
    description: Simple example endpoints
  - name: Specification
    description: The swagger API specification

consumes:
  - application/json
produces:
  - application/json


definitions:
  ExampleBody:
    type: object
    title: example
    required:
      - name
    properties:
      name:
        type: string
        example: no_stress
  UserRegisterBody:
    type: object
    title: register
    required:
      - email
      - password
      - first_name
      - last_name
    properties:
      email:
        type: string
        format: email
        example: user1@site.com
      password:
        type: string
        format: password
        example: password
      first_name:
        type: string
        example: fuser1
      last_name:
        type: string
        example: luser1
  ErrorAPIResponse:
    type: object
    properties:
      status:
        type: string
      error:
        type: string

  AuthAPIResponse:
    type: object
    properties:
      status:
        type: string
      data:
        type: object
        properties:
          token:
            type: string
          first_name:
            type: string
          last_name:
            type: string
          email:
            type: string
            format: email
paths:
  /examples:
    get:
      tags:
        - Examples
      description: Fetch all examples
      responses:
        200:
          description: Returns all examples
    post:
      tags:
        - Examples
      description: Create a new example
      parameters:
        - name: example
          in: body
          description: an example
          required: true
          schema:
            $ref: "#/definitions/ExampleBody"
      responses:
        200:
          description: Returns all examples

  /examples/{id}:
    get:
      tags:
        - Examples
      parameters:
        - name: id
          in: path
          required: true
          description: The id of the example to retrieve
          type: integer
      responses:
        200:
          description: Return the example with the specified id
        404:
          description: Example not found

  /spec:
    get:
      tags:
        - Specification
      responses:
        200:
          description: Return the API specification

  /auth/signup:
    post:
      tags:
        - Authentication
      description: Register a new user
      summary: User can sign up
      operationId: signupUser
      produces:
        - application/json
      parameters:
        - name: register_body
          in: body
          description: User create object
          required: true
          schema:
            $ref: "#/definitions/UserRegisterBody"
      responses:
        '201':
          description: User got created
          schema:
            $ref: "#/definitions/AuthAPIResponse"
        '500':
          description: An internal server error occurs
          schema:
            $ref: "#/definitions/ErrorAPIResponse"
        '409':
          description: Indentical user exists
          schema:
            $ref: "#/definitions/ErrorAPIResponse"
